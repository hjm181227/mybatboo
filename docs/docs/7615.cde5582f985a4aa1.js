"use strict";(self.webpackChunkmybatboo=self.webpackChunkmybatboo||[]).push([[7615],{7615:(ut,H,l)=>{l.r(H),l.d(H,{DiagnosisResultComponent:()=>Xt});var t=l(2223),M=l(974),P=l(1135),Z=l(3900),v=l(8505),Q=l(262),A=l(515),z=l(8382),S=l(9646),w=l(4004),o=l(5649),D=l(4650);function Y(n){var i=n.toString(16);return 1===i.length?"0"+i:i}function $(n){return"#"+n.map(Y).join("")}function B(n){return n?function X(n){return Array.isArray(n[0])}(n)?n:[n]:[]}function F(n,i,e){for(var r=0;r<e.length;r++)if(V(n,i,e[r]))return!0;return!1}function V(n,i,e){switch(e.length){case 3:if(function tt(n,i,e){return 255!==n[i+3]||n[i]===e[0]&&n[i+1]===e[1]&&n[i+2]===e[2]}(n,i,e))return!0;break;case 4:if(function et(n,i,e){return n[i+3]&&e[3]?n[i]===e[0]&&n[i+1]===e[1]&&n[i+2]===e[2]&&n[i+3]===e[3]:n[i+3]===e[3]}(n,i,e))return!0;break;case 5:if(function nt(n,i,e){var r=e[0],a=e[1],u=e[2],s=e[3],d=e[4],p=n[i+3],f=N(p,s,d);return s?!!(!p&&f||N(n[i],r,d)&&N(n[i+1],a,d)&&N(n[i+2],u,d)&&f):f}(n,i,e))return!0;break;default:return!1}}function N(n,i,e){return n>=i-e&&n<=i+e}function ot(n,i,e){for(var r={},u=e.ignoredColor,s=e.step,d=[0,0,0,0,0],p=0;p<i;p+=s){var f=n[p],C=n[p+1],T=n[p+2],O=n[p+3];if(!u||!F(n,p,u)){var b=Math.round(f/24)+","+Math.round(C/24)+","+Math.round(T/24);r[b]=r[b]?[r[b][0]+f*O,r[b][1]+C*O,r[b][2]+T*O,r[b][3]+O,r[b][4]+1]:[f*O,C*O,T*O,O,1],d[4]<r[b][4]&&(d=r[b])}}var Vt=d[1],te=d[2],q=d[3],ee=d[4];return q?[Math.round(d[0]/q),Math.round(Vt/q),Math.round(te/q),Math.round(q/ee)]:e.defaultColor}function it(n,i,e){for(var r=0,a=0,u=0,s=0,d=0,p=e.ignoredColor,f=e.step,C=0;C<i;C+=f){var T=n[C+3],O=n[C]*T,b=n[C+1]*T,L=n[C+2]*T;p&&F(n,C,p)||(r+=O,a+=b,u+=L,s+=T,d++)}return s?[Math.round(r/s),Math.round(a/s),Math.round(u/s),Math.round(s/d)]:e.defaultColor}function rt(n,i,e){for(var r=0,a=0,u=0,s=0,d=0,p=e.ignoredColor,f=e.step,C=0;C<i;C+=f){var T=n[C],O=n[C+1],b=n[C+2],L=n[C+3];p&&F(n,C,p)||(r+=T*T*L,a+=O*O*L,u+=b*b*L,s+=L,d++)}return s?[Math.round(Math.sqrt(r/s)),Math.round(Math.sqrt(a/s)),Math.round(Math.sqrt(u/s)),Math.round(s/d)]:e.defaultColor}function m(n){return _(n,"defaultColor",[0,0,0,0])}function _(n,i,e){return void 0===n[i]?e:n[i]}function R(n){return function gt(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement}(n)?"canvas":function dt(n){return st&&n instanceof OffscreenCanvas}(n)?"offscreencanvas":function mt(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap}(n)?"imagebitmap":n.src}function at(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement}var st=typeof OffscreenCanvas<"u",Ct=typeof window>"u";function I(n){return Error("FastAverageColor: "+n)}function E(n,i){i||console.error(n)}var vt=function(){function n(){this.canvas=null,this.ctx=null}return n.prototype.getColorAsync=function(i,e){if(!i)return Promise.reject(I("call .getColorAsync() without resource."));if("string"==typeof i){if(typeof Image>"u")return Promise.reject(I("resource as string is not supported in this environment"));var r=new Image;return r.crossOrigin=e&&e.crossOrigin||"",r.src=i,this.bindImageEvents(r,e)}if(at(i)&&!i.complete)return this.bindImageEvents(i,e);var a=this.getColor(i,e);return a.error?Promise.reject(a.error):Promise.resolve(a)},n.prototype.getColor=function(i,e){var r=m(e=e||{});if(!i)return E(a=I("call .getColor(null) without resource"),e.silent),this.prepareResult(r,a);var s=function ht(n,i){var p,e=_(i,"left",0),r=_(i,"top",0),a=_(i,"width",n.width),u=_(i,"height",n.height),s=a,d=u;return"precision"===i.mode||(a>u?(p=a/u,s=100,d=Math.round(s/p)):(p=u/a,d=100,s=Math.round(d/p)),(s>a||d>u||s<10||d<10)&&(s=a,d=u)),{srcLeft:e,srcTop:r,srcWidth:a,srcHeight:u,destWidth:s,destHeight:d}}(function J(n){if(at(n)){var i=n.naturalWidth,e=n.naturalHeight;return!n.naturalWidth&&function x(n){return-1!==n.search(/\.svg(\?|$)/i)}(n.src)&&(i=e=100),{width:i,height:e}}return function pt(n){return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement}(n)?{width:n.videoWidth,height:n.videoHeight}:{width:n.width,height:n.height}}(i),e);if(!(s.srcWidth&&s.srcHeight&&s.destWidth&&s.destHeight))return E(a=I('incorrect sizes for resource "'.concat(R(i),'"')),e.silent),this.prepareResult(r,a);if(!this.canvas&&(this.canvas=function ft(){return Ct?st?new OffscreenCanvas(1,1):null:document.createElement("canvas")}(),!this.canvas))return E(a=I("OffscreenCanvas is not supported in this browser"),e.silent),this.prepareResult(r,a);if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx)return E(a=I("Canvas Context 2D is not supported in this browser"),e.silent),this.prepareResult(r);this.ctx.imageSmoothingEnabled=!1}this.canvas.width=s.destWidth,this.canvas.height=s.destHeight;try{this.ctx.clearRect(0,0,s.destWidth,s.destHeight),this.ctx.drawImage(i,s.srcLeft,s.srcTop,s.srcWidth,s.srcHeight,0,0,s.destWidth,s.destHeight);var d=this.ctx.getImageData(0,0,s.destWidth,s.destHeight).data;return this.prepareResult(this.getColorFromArray4(d,e))}catch(p){var a;return E(a=I("security error (CORS) for resource ".concat(R(i),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image")),e.silent),!e.silent&&console.error(p),this.prepareResult(r,a)}},n.prototype.getColorFromArray4=function(i,e){var a=i.length,u=m(e=e||{});if(a<4)return u;var p,s=a-a%4,d=4*(e.step||1);switch(e.algorithm||"sqrt"){case"simple":p=it;break;case"sqrt":p=rt;break;case"dominant":p=ot;break;default:throw I("".concat(e.algorithm," is unknown algorithm"))}return p(i,s,{defaultColor:u,ignoredColor:B(e.ignoredColor),step:d})},n.prototype.prepareResult=function(i,e){var r=i.slice(0,3),a=[i[0],i[1],i[2],i[3]/255],u=function j(n){return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(i);return{value:[i[0],i[1],i[2],i[3]],rgb:"rgb("+r.join(",")+")",rgba:"rgba("+a.join(",")+")",hex:$(r),hexa:$(i),isDark:u,isLight:!u,error:e}},n.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},n.prototype.bindImageEvents=function(i,e){var r=this;return new Promise(function(a,u){var s=function(){f();var C=r.getColor(i,e);C.error?u(C.error):a(C)},d=function(){f(),u(I('Error loading image "'.concat(i.src,'".')))},p=function(){f(),u(I('Image "'.concat(i.src,'" loading aborted')))},f=function(){i.removeEventListener("load",s),i.removeEventListener("error",d),i.removeEventListener("abort",p)};i.addEventListener("load",s),i.addEventListener("error",d),i.addEventListener("abort",p)})},n}(),U=l(9300),xt=l(6271);let Mt=(()=>{class n{transform(e){return e||0===e?xt.q6[e]:""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"cropName",type:n,pure:!0,standalone:!0}),n})();var yt=l(50),bt=l(9282),k=l(8740),Ot=l(2442),y=l(4755),g=l(6921);function At(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mp-button",2),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openDiseaseDetailModal())}),t._UZ(1,"mp-icon",3),t.qZA()}}let Tt=(()=>{class n{constructor(e,r){this.bottomSheet=e,this.navigate=r}get isSick(){switch(this.diseaseItem?.diseaseCode){case 0:case 3:case 6:case 9:return!1;default:return!0}}openDiseaseDetailModal(){this.navigate.openDiseaseDetailModal({sickKey:this.diseaseItem.sickKey,diseaseCode:this.diseaseItem.diseaseCode,cropName:this.cropName})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k.BB),t.Y36(Ot.o))},n.\u0275cmp=t.Xpm({type:n,selectors:[["disease-list-item"]],inputs:{cropName:"cropName",diseaseItem:"diseaseItem"},standalone:!0,features:[t.jDz],decls:7,vars:5,consts:[[1,"disease-info"],["label","\uc0c1\uc138 \uc815\ubcf4","color","gray","variant","outline","size","xs",3,"click",4,"ngIf"],["label","\uc0c1\uc138 \uc815\ubcf4","color","gray","variant","outline","size","xs",3,"click"],["right","","name","chevron_right","size","20px"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"span"),t._uU(2),t.ALo(3,"diseaseName"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()(),t.YNc(6,At,2,0,"mp-button",1)),2&e&&(t.xp6(2),t.hij("\ubcd1\uba85: ",t.lcZ(3,3,r.diseaseItem.diseaseCode),""),t.xp6(3),t.hij("\uc77c\uce58\uc728: ",(100*r.diseaseItem.accuracy).toFixed(2),"%"),t.xp6(1),t.Q6J("ngIf",r.isSick))},dependencies:[M.B,y.O5,g.zJ,g.gL,g.vS,bt.A],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 12px 12px 16px;box-shadow:0 6px 16px #14141414,0 0 0 1px #1414140f;border-radius:8px}[_nghost-%COMP%]   .disease-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;font-size:13px;color:var(--grayDark);font-weight:500}']}),n})();var It=l(9841),W=l(5554),K=l(9401),G=l(8615),ct=l(7204);function Zt(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"* \ub0b4\uc6a9 \uc218\uc815\uc911"),t.qZA())}function Dt(n,i){if(1&n&&t._UZ(0,"mp-text",12),2&n){const e=t.oxw();t.Q6J("innerHtml",null==e.memo?null:e.memo.contents,t.oJD)}}function Bt(n,i){if(1&n&&t._UZ(0,"mp-textarea",13),2&n){const e=t.oxw();t.Q6J("formControl",e.contents)("placeholder","\uba54\ubaa8 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")}}function Pt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mp-button",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.delete())}),t.ALo(1,"async"),t._UZ(2,"mp-icon",15),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("loading",t.lcZ(1,1,e.status$).pending)}}function wt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mp-button",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.editMode=!1)}),t._UZ(1,"mp-icon",17),t.qZA()}}let Rt=(()=>{class n{constructor(e,r,a,u){this.modalRef=e,this.api=r,this.alert=a,this.toase=u,this.editMode=!1,this.contents=new K.NI(""),this.status$=new P.X(o.Lr.INITIAL)}editContent(){this.editMode?this.api.updateDiagnosisRecordMemo(this.memo.id,this.contents.value).pipe((0,o.vC)(this.status$),(0,v.b)(e=>this.memo=e),(0,v.b)(()=>this.editMode=!1),(0,v.b)(()=>this.toase.show("\ub0b4\uc6a9\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))).subscribe():(this.contents.patchValue(this.memo.contents),this.editMode=!0)}delete(){this.alert.confirm({title:"\uba54\ubaa8 \uc0ad\uc81c",content:"\uba54\ubaa8\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",confirmMessage:"\uc0ad\uc81c",cancelMessage:"\ucde8\uc18c",confirmButtonColor:"red"}).pipe((0,U.h)(e=>!!e),(0,Z.w)(()=>this.api.deleteDiagnosisRecordMemo(this.memo.id).pipe((0,o.vC)(this.status$))),(0,v.b)(()=>this.toase.show("\uba54\ubaa8\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),(0,v.b)(()=>this.close())).subscribe()}close(){this.modalRef.hide()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k.UZ),t.Y36(G.s),t.Y36(g.c9),t.Y36(ct.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-record-memo-detail"]],inputs:{memo:"memo"},standalone:!0,features:[t.jDz],decls:16,vars:13,consts:[["height","64px",3,"title"],["left","","iconName","close","size","m","variant","void","color","grayDark",3,"click"],[1,"content"],[1,"date-wrapper"],[4,"ngIf"],[3,"innerHtml",4,"ngIf"],["autofocus","true","height","300px","padding","14px","backgroundColor","white","boxShadow","0px 2px 4px 0px rgba(20, 20, 20, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)",3,"formControl","placeholder",4,"ngIf"],[1,"button-wrapper"],["variant","weak","size","s","color","red","label","\uc0ad\uc81c",3,"loading","click",4,"ngIf"],["variant","weak","size","s","color","gray","label","\ucde8\uc18c",3,"click",4,"ngIf"],["variant","weak","size","s","color","green","label","\ub0b4\uc6a9 \uc218\uc815",3,"loading","click"],["left","","name","edit"],[3,"innerHtml"],["autofocus","true","height","300px","padding","14px","backgroundColor","white","boxShadow","0px 2px 4px 0px rgba(20, 20, 20, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)",3,"formControl","placeholder"],["variant","weak","size","s","color","red","label","\uc0ad\uc81c",3,"loading","click"],["left","","name","delete"],["variant","weak","size","s","color","gray","label","\ucde8\uc18c",3,"click"],["left","","name","undo"]],template:function(e,r){1&e&&(t.TgZ(0,"page-header",0)(1,"mp-icon-button",1),t.NdJ("click",function(){return r.close()}),t.qZA()(),t.TgZ(2,"div",2)(3,"div",3)(4,"span"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.YNc(7,Zt,2,0,"span",4),t.qZA(),t.YNc(8,Dt,1,1,"mp-text",5),t.YNc(9,Bt,1,2,"mp-textarea",6),t.qZA(),t.TgZ(10,"div",7),t.YNc(11,Pt,3,3,"mp-button",8),t.YNc(12,wt,2,0,"mp-button",9),t.TgZ(13,"mp-button",10),t.NdJ("click",function(){return r.editContent()}),t.ALo(14,"async"),t._UZ(15,"mp-icon",11),t.qZA()()),2&e&&(t.Q6J("title","\uba54\ubaa8 \uc0c1\uc138"),t.xp6(5),t.hij("\ucd5c\uc885 \uc218\uc815\uc77c: ",t.xi3(6,8,r.memo.updateDt,"yyyy.MM.dd HH:mm"),""),t.xp6(2),t.Q6J("ngIf",r.editMode),t.xp6(1),t.Q6J("ngIf",!r.editMode),t.xp6(1),t.Q6J("ngIf",r.editMode),t.xp6(2),t.Q6J("ngIf",!r.editMode),t.xp6(1),t.Q6J("ngIf",r.editMode),t.xp6(1),t.Q6J("loading",t.lcZ(14,11,r.status$).pending))},dependencies:[M.B,y.O5,K.JJ,K.oH,g.zJ,g.KT,g.gL,g.OQ,g.k_,y.Ov,y.uU,D.q,g.Ly],styles:['@charset "UTF-8";[_nghost-%COMP%]{padding:24px}[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   .date-wrapper[_ngcontent-%COMP%]{font-size:13px;color:var(--gray);font-weight:400;padding:0 0 12px 4px;display:flex;justify-content:space-between}[_nghost-%COMP%]   mp-text[_ngcontent-%COMP%]{display:block;height:300px;padding:14px;border-radius:8px;overflow-y:scroll;box-shadow:0 2px 4px #14141405,0 0 0 1px #00000014;font-size:13px;color:var(--grayDark);font-weight:500}[_nghost-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:12px;padding:24px 0}[_nghost-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   mp-button[_ngcontent-%COMP%]{flex:1}']}),n})();function kt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mp-row",12),t.NdJ("click",function(){const u=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.openMemoDetail(u))}),t.TgZ(1,"mp-col",13),t._uU(2),t.qZA(),t.TgZ(3,"mp-col",14),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"mp-col",14),t._uU(7),t.ALo(8,"date"),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.contents),t.xp6(2),t.Oqu(t.xi3(5,3,e.regDt,"yyyy.MM.dd HH:mm")),t.xp6(3),t.Oqu(t.xi3(8,6,e.updateDt,"yyyy.MM.dd HH:mm"))}}function Lt(n,i){1&n&&t._UZ(0,"mp-blank",15)}function Jt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"mp-table",6)(2,"mp-row",7)(3,"mp-col",8),t._uU(4,"\ub0b4\uc6a9"),t.qZA(),t.TgZ(5,"mp-col",9),t._uU(6,"\uc791\uc131\uc77c"),t.qZA(),t.TgZ(7,"mp-col",9),t._uU(8,"\ucd5c\uc885 \uc218\uc815\uc77c"),t.qZA()(),t.YNc(9,kt,9,9,"mp-row",10),t.YNc(10,Lt,1,0,"mp-blank",11),t.qZA(),t.BQk()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("listNum",10)("bodyColor","white"),t.xp6(4),t.Q6J("flex",1),t.xp6(2),t.Q6J("flex",1),t.xp6(2),t.Q6J("ngForOf",e.memoList),t.xp6(1),t.Q6J("ngIf",0===(null==e.memoList?null:e.memoList.length))}}const Nt=function(n){return{memoList:n}};let Ft=(()=>{class n{constructor(e,r,a,u){this.api=e,this.modalRef=r,this.alert=a,this.bottomSheet=u,this.loader$=new P.X(null),this.memoList$=(0,It.a)([(0,o.X5)(this,"recordId"),this.loader$]).pipe((0,U.h)(([s])=>!!s),(0,Z.w)(([s])=>this.api.getDiagnosisMemoList(s)),(0,v.b)(s=>console.log(s)))}close(){this.modalRef.hide()}addMemo(){this.alert.prompt({title:"\uba54\ubaa8 \ucd94\uac00",content:"\uba54\ubaa8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",confirmMessage:"\uc791\uc131",confirmButtonColor:"green",confirmButtonIconType:"outlined",confirmButtonIconName:"add",cancelMessage:"\ucde8\uc18c"}).pipe((0,U.h)(e=>!!e),(0,v.b)(e=>console.log(e)),(0,Z.w)(e=>this.api.addDiagnosisRecordMemo(this.recordId,e)),(0,v.b)(()=>this.loader$.next(null))).subscribe()}openMemoDetail(e){this.bottomSheet.show(Rt,{initialState:{memo:e},onClose:()=>this.loader$.next(null)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(G.s),t.Y36(k.UZ),t.Y36(g.c9),t.Y36(k.BB))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-record-memo-list"]],inputs:{recordId:"recordId"},standalone:!0,features:[t.jDz],decls:8,vars:6,consts:[["height","64px"],["left","","iconName","close","size","m","variant","void","color","grayDark",3,"click"],["center",""],["right","","variant","outline","color","gray","size","s",3,"label","click"],["left","","name","edit"],[4,"ngIf"],["colGap","4px","rowGap","12px","rowPadding","12px 8px","bodyPadding","12px",3,"listNum","bodyColor"],["head",""],["width","150px","align","center"],["align","center",3,"flex"],[3,"click",4,"ngFor","ngForOf"],["minHeight","300px","title","\uc791\ubb3c\uc5d0 \ub300\ud55c \uae30\ub85d\uc744 \uba54\ubaa8\ub85c \ub0a8\uaca8\ubcf4\uc138\uc694!",4,"ngIf"],[3,"click"],[1,"memo-content"],["align","right"],["minHeight","300px","title","\uc791\ubb3c\uc5d0 \ub300\ud55c \uae30\ub85d\uc744 \uba54\ubaa8\ub85c \ub0a8\uaca8\ubcf4\uc138\uc694!"]],template:function(e,r){1&e&&(t.TgZ(0,"page-header",0)(1,"mp-icon-button",1),t.NdJ("click",function(){return r.close()}),t.qZA(),t.TgZ(2,"mp-text",2),t._uU(3,"\uc791\ubb3c \uc77c\uc9c0"),t.qZA(),t.TgZ(4,"mp-button",3),t.NdJ("click",function(){return r.addMemo()}),t._UZ(5,"mp-icon",4),t.qZA()(),t.YNc(6,Jt,11,6,"ng-container",5),t.ALo(7,"async")),2&e&&(t.xp6(4),t.Q6J("label","\uba54\ubaa8 \ucd94\uac00"),t.xp6(2),t.Q6J("ngIf",t.VKq(4,Nt,t.lcZ(7,2,r.memoList$))))},dependencies:[M.B,y.sg,y.O5,g.zJ,g.KT,g.gL,g.OQ,g.k_,g.vS,y.Ov,y.uU,D.q,g.DJ,W.gH,W.Xh,W.wb,W.ST],styles:['@charset "UTF-8";.bottom-sheet[_nghost-%COMP%], .bottom-sheet   [_nghost-%COMP%]{height:500px;max-height:auto!important}[_nghost-%COMP%]{padding-top:var(--page-header-height);padding-bottom:var(--bottom-fixed-bar-height)}[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]   mp-row[head][_ngcontent-%COMP%]{font-size:15px;color:var(--grayDark);font-weight:500;background-color:#f5f5f5;box-shadow:inset 0 -1px #0000000a,inset 0 1px #0000000a}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]   mp-row[_ngcontent-%COMP%]:not(.head){border-radius:10px;box-shadow:0 2px 4px #14141405,0 0 0 1px #00000014;background-color:var(--hoverWeak)}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]   mp-row[_ngcontent-%COMP%]:not(.head)   mp-col[_ngcontent-%COMP%]{font-size:13px;color:var(--grayDark);font-weight:400;word-wrap:break-word;-webkit-line-clamp:1;text-overflow:ellipsis;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}']}),n})();var Et=l(8484),lt=l(1757),Ut=l(9972);const qt=function(n,i){return{text:n,placement:"right",color:i,gap:"10px"}};function Ht(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mp-radio",10),t.NdJ("click",function(){const u=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.selected.patchValue(u.id))}),t.ALo(1,"categoryName"),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw(2);t.Q6J("selected",r.selected.value===e.id)("label",t.WLB(4,qt,t.lcZ(1,2,e.name)+" ("+e.cnt+")",r.selected.value===e.id?"green":"gray"))}}function Qt(n,i){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,Ht,2,7,"mp-radio",9),t.qZA()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}const zt=function(){return["my-page","category"]};let St=(()=>{class n extends o.NT{constructor(e,r,a){super(),this.modalRef=e,this.api=r,this.toast=a,this.categories$=this.api.loadUserCategories().pipe((0,v.b)(console.log)),this.selected=new K.NI(void 0),this.status$=new P.X(o.Lr.INITIAL)}ngOnInit(){this.subscribeOn((0,o.X5)(this,"diagnosisId").pipe((0,U.h)(e=>!!e),(0,Z.w)(e=>this.api.getDiagnosisResult(e).pipe((0,v.b)(({categoryId:r})=>this.initialCategoryId=r),(0,v.b)(({categoryId:r})=>this.selected.patchValue(r))))))}close(){this.modalRef.hide()}changeCategory(){this.api.changeDiagnosisRecordCategory(this.diagnosisId,this.selected.value).pipe((0,o.vC)(this.status$),(0,v.b)(()=>this.toast.show("\uce74\ud14c\uace0\ub9ac\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),(0,v.b)(()=>this.modalRef.hide())).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k.UZ),t.Y36(G.s),t.Y36(ct.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-category-change-modal"]],inputs:{diagnosisId:"diagnosisId"},standalone:!0,features:[t.qOj,t.jDz],decls:11,vars:9,consts:[["height","64px"],["left","","size","m","iconName","close","color","grayDark","variant","void",3,"click"],["center",""],["mpButton","","right","","size","xs","label","\uce74\ud14c\uace0\ub9ac \uad00\ub9ac","variant","outline","color","grayDark",3,"routerLink"],["right","","name","chevron_right"],["class","category-list",4,"ngIf"],[1,"button-wrapper"],["size","m","color","green","label","\ubcc0\uacbd\ud558\uae30",3,"disabled","loading","click"],[1,"category-list"],[3,"selected","label","click",4,"ngFor","ngForOf"],[3,"selected","label","click"]],template:function(e,r){1&e&&(t.TgZ(0,"page-header",0)(1,"mp-icon-button",1),t.NdJ("click",function(){return r.close()}),t.qZA(),t.TgZ(2,"mp-text",2),t._uU(3,"\uce74\ud14c\uace0\ub9ac \ubcc0\uacbd"),t.qZA(),t.TgZ(4,"a",3),t._UZ(5,"mp-icon",4),t.qZA()(),t.YNc(6,Qt,2,1,"div",5),t.ALo(7,"async"),t.TgZ(8,"div",6)(9,"mp-button",7),t.NdJ("click",function(){return r.changeCategory()}),t.ALo(10,"async"),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("routerLink",t.DdM(8,zt)),t.xp6(2),t.Q6J("ngIf",t.lcZ(7,4,r.categories$)),t.xp6(3),t.Q6J("disabled",r.initialCategoryId===r.selected.value)("loading",t.lcZ(10,6,r.status$).pending))},dependencies:[M.B,y.sg,y.O5,lt.rH,Ut.Fo,g.zJ,g.KT,g.gL,g.OQ,g.k_,g.vS,y.Ov,D.q,g.l3,Et.D],styles:['@charset "UTF-8";[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   .category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:24px;gap:16px}[_nghost-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{padding:24px}[_nghost-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   mp-button[_ngcontent-%COMP%]{width:100%}']}),n})();var Yt=l(8054);function $t(n,i){if(1&n&&(t.TgZ(0,"div",14),t._UZ(1,"img",15),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("src",null==e?null:e.imagePath,t.LSH)}}function jt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",16),t._UZ(1,"crop-type-badge",17),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"mp-button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changeCategory())}),t._UZ(6,"mp-icon",19),t.qZA()()}if(2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("cropType",e.cropType),t.xp6(2),t.Oqu(t.xi3(4,3,e.regDate,"yyyy.MM.dd HH:mm")),t.xp6(2),t.Q6J("label","\uce74\ud14c\uace0\ub9ac \ubcc0\uacbd")}}function Wt(n,i){if(1&n&&(t._UZ(0,"disease-list-item",21),t.ALo(1,"cropName")),2&n){const e=i.$implicit,r=t.oxw(2).ngIf;t.Q6J("diseaseItem",e)("cropName",t.lcZ(1,2,r.cropType))}}function Kt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",8)(2,"span",9),t._uU(3,"\ub2e4\ub978 \uc720\uc0ac \uacb0\uacfc"),t.qZA(),t.YNc(4,Wt,2,4,"disease-list-item",20),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.diagnosisResults.slice(1,e.diagnosisResults.length))}}function Gt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,$t,2,1,"div",4),t.ALo(2,"async"),t.TgZ(3,"div",5),t.YNc(4,jt,7,6,"div",6),t.TgZ(5,"div",7)(6,"div",8)(7,"span",9),t._uU(8,"\uac00\uc7a5 \uc720\uc0ac\ud55c \uacb0\uacfc"),t.qZA(),t._UZ(9,"disease-list-item",10),t.ALo(10,"cropName"),t.qZA(),t.YNc(11,Kt,5,1,"ng-container",3),t.qZA(),t.TgZ(12,"mp-callout",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openInquiryForm())}),t._UZ(13,"mp-icon",12)(14,"mp-icon",13),t.qZA()(),t.BQk()}if(2&n){const e=i.ngIf,r=t.oxw();t.xp6(1),t.Q6J("ngLet",t.lcZ(2,6,r.bgColor$)),t.xp6(3),t.Q6J("ngIf",e),t.xp6(5),t.Q6J("cropName",t.lcZ(10,8,e.cropType))("diseaseItem",e.diagnosisResults[0]),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.diagnosisResults.length)>1),t.xp6(1),t.Q6J("description","\uc9c4\ub2e8 \uacb0\uacfc\uc5d0 \ub300\ud574 \ub354 \uad81\uae08\ud55c\uac8c \uc788\ub2e4\uba74 \uc804\ubb38\uac00\uc5d0\uac8c \uc9c8\ubb38\uc744 \ub0a8\uaca8\ubcf4\uc138\uc694.")}}let Xt=(()=>{class n extends o.NT{constructor(e,r,a,u,s,d,p){super(),this.modalRef=e,this.api=r,this.route=a,this.renderer=u,this.elementRef=s,this.bottomSheet=d,this.modalService=p,this.diagnosisResult$=new P.X(null),this.fastAverageColor=new vt,this.bgColor$=this.diagnosisResult$.pipe((0,U.h)(f=>!!f),(0,Z.w)(({imagePath:f})=>this.fastAverageColor.getColorAsync(f)),(0,v.b)(f=>{this.renderer.setStyle(this.elementRef.nativeElement,"--image-container-bg-color",f?.hex,t.JOm.DashCase)}),(0,Q.K)(()=>A.E))}ngOnInit(){this.subscribeOn((0,z.s)(()=>!!this.diagnosisRecord,(0,S.of)(this.diagnosisRecord),(0,z.s)(()=>!!this.diagnosisId,(0,S.of)(this.diagnosisId),this.route.params.pipe((0,w.U)(({diagnosisId:e})=>+e))).pipe((0,Z.w)(e=>this.api.getDiagnosisResult(e).pipe((0,w.U)(r=>({...r,id:e})))))).pipe((0,w.U)(e=>this.diagnosisResult$.next(e)),(0,v.b)(console.log))),this.modalRef&&this.modalRef.setClass("diagnosis-result-modal")}close(){this.modalRef?this.modalRef.hide():history.back()}openMemoList(){this.diagnosisResult$.value&&this.bottomSheet.show(Ft,{initialState:{recordId:this.diagnosisResult$.value.diagnosisRecordId}})}changeCategory(){this.bottomSheet.show(St,{initialState:{diagnosisId:this.diagnosisResult$.value.diagnosisRecordId}})}openInquiryForm(){this.modalService.show(Yt.u,{initialState:{record:this.diagnosisResult$.value}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k.UZ,8),t.Y36(G.s),t.Y36(lt.gz),t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(k.BB),t.Y36(k.tT))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-diagnosis-result"]],inputs:{diagnosisId:"diagnosisId",diagnosisRecord:"diagnosisRecord"},standalone:!0,features:[t.qOj,t.jDz],decls:5,vars:4,consts:[["height","64px",3,"title"],["left","","iconName","arrow_back","size","m","variant","void","color","grayDark",3,"click"],["right","","iconName","note_alt","iconType","outlined","iconSize","24px","size","m","variant","weak","borderRadius","6px","color","grayDark",3,"click"],[4,"ngIf"],["class","crop-image",4,"ngLet"],[1,"content-wrapper"],["class","crop-info",4,"ngIf"],[1,"disease-list"],[1,"disease-wrapper"],[1,"title"],[3,"cropName","diseaseItem"],["color","green","variant","weak","size","s",3,"description","click"],["left","","name","help_outlined","size","18px"],["right","","name","chevron_right","size","18px","color","greenDark"],[1,"crop-image"],["alt","crop image",3,"src"],[1,"crop-info"],[3,"cropType"],["size","xs","variant","outline","color","grayDark",3,"label","click"],["right","","name","chevron_right","type","outlined"],[3,"diseaseItem","cropName",4,"ngFor","ngForOf"],[3,"diseaseItem","cropName"]],template:function(e,r){1&e&&(t.TgZ(0,"page-header",0)(1,"mp-icon-button",1),t.NdJ("click",function(){return r.close()}),t.qZA(),t.TgZ(2,"mp-icon-button",2),t.NdJ("click",function(){return r.openMemoList()}),t.qZA()(),t.YNc(3,Gt,15,10,"ng-container",3),t.ALo(4,"async")),2&e&&(t.Q6J("title","\uc9c4\ub2e8 \uacb0\uacfc"),t.xp6(3),t.Q6J("ngIf",t.lcZ(4,2,r.diagnosisResult$)))},dependencies:[M.B,y.sg,y.O5,g.zJ,g.KT,g.gL,g.k_,g.vS,o.eJ,y.Ov,y.uU,D.q,Mt,yt.Y,Tt,g.iP],styles:['@charset "UTF-8";  .modal-dialog.diagnosis-result-modal{max-width:100vw;max-height:var(--full-height);margin:0}  .modal-dialog.diagnosis-result-modal .modal-content{display:block;border-radius:0;width:100vw;height:var(--full-height);margin:0}[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   .crop-image[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:24px;background:var(--image-container-bg-color, #fcfcfc);border-bottom:1px solid var(--grayLightest)}[_nghost-%COMP%]   .crop-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;max-width:280px;aspect-ratio:1/1;box-shadow:0 6px 16px #14141414,0 0 0 1px #1414140f}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:24px 36px}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .crop-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:13px;color:var(--grayDark)}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .crop-info[_ngcontent-%COMP%]   mp-button[_ngcontent-%COMP%]{margin-left:auto}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .disease-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .disease-list[_ngcontent-%COMP%]   .disease-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .disease-list[_ngcontent-%COMP%]   .disease-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:15px;color:var(--grayDark);font-weight:600;margin-left:4px}']}),n})()},8054:(ut,H,l)=>{l.d(H,{u:()=>rt});var t=l(974),M=l(9401),P=l(5649),Z=l(4650),v=l(50),Q=l(9282),A=l(6921),z=l(4657),S=l(1135),w=l(8505),o=l(2223),D=l(8740),Y=l(8615),$=l(5800),j=l(1757),B=l(4755);function X(m,_){if(1&m){const c=o.EpF();o.TgZ(0,"div",5),o.NdJ("click",function(){const J=o.CHM(c).$implicit,R=o.oxw(2);return o.KtG(R.select(J))}),o._UZ(1,"img",6)(2,"crop-type-badge",7),o.TgZ(3,"span"),o._uU(4),o.ALo(5,"diseaseName"),o.qZA(),o.TgZ(6,"span"),o._uU(7),o.ALo(8,"date"),o.qZA()()}if(2&m){const c=_.$implicit;o.xp6(1),o.Q6J("src",c.imagePath,o.LSH),o.xp6(1),o.Q6J("cropType",c.cropType),o.xp6(2),o.hij("\ubcd1\ud574\uba85: ",o.lcZ(5,4,c.diagnosisResults[0].diseaseCode),""),o.xp6(3),o.hij("\uc9c4\ub2e8\uc77c: ",o.xi3(8,6,c.regDate,"yyyy.MM.dd HH:mm"),"")}}function F(m,_){if(1&m){const c=o.EpF();o.ynx(0),o.TgZ(1,"div",8)(2,"span"),o._uU(3,"\uc544\uc9c1 \uc791\ubb3c\uc744 \uc9c4\ub2e8\ud55c \uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),o.qZA(),o.TgZ(4,"mp-button",9),o.NdJ("click",function(){o.CHM(c);const x=o.oxw(2);return o.KtG(x.goToDiagnosis())}),o._UZ(5,"mp-icon",10),o.qZA()(),o.BQk()}}function V(m,_){if(1&m&&(o.ynx(0),o.TgZ(1,"div",3),o.YNc(2,X,9,9,"div",4),o.qZA(),o.YNc(3,F,6,0,"ng-container",2),o.BQk()),2&m){const c=_.ngIf;o.xp6(2),o.Q6J("ngForOf",c),o.xp6(1),o.Q6J("ngIf",0===(null==c?null:c.length))}}let tt=(()=>{class m{constructor(c,h,x,J,R){this.modalRef=c,this.api=h,this.diagnosis=x,this.router=J,this.modalService=R,this.recordList$=this.api.loadUserDiagnosisRecords()}close(){this.modalRef.hide()}goToDiagnosis(){this.router.navigate(["/main"]).then(()=>{this.modalRef.hide(),this.diagnosis.startDiagnosis()})}select(c){this.selectedRecord=c,this.close()}}return m.\u0275fac=function(c){return new(c||m)(o.Y36(D.UZ),o.Y36(Y.s),o.Y36($.r),o.Y36(j.F0),o.Y36(D.tT))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-inquiry-record-select-modal"]],standalone:!0,features:[o.jDz],decls:4,vars:4,consts:[["height","64px",3,"title"],["left","","iconName","close","size","m","variant","void","color","grayDark",3,"click"],[4,"ngIf"],[1,"record-container"],["class","record-item",3,"click",4,"ngFor","ngForOf"],[1,"record-item",3,"click"],[3,"src"],[3,"cropType"],[1,"empty"],["label","\uc791\ubb3c \uc9c4\ub2e8\ud558\uae30","color","green","size","m",3,"click"],["left","","name","add_to_photos"]],template:function(c,h){1&c&&(o.TgZ(0,"page-header",0)(1,"mp-icon-button",1),o.NdJ("click",function(){return h.close()}),o.qZA()(),o.YNc(2,V,4,2,"ng-container",2),o.ALo(3,"async")),2&c&&(o.Q6J("title","\uc9c4\ub2e8 \uae30\ub85d \uc120\ud0dd"),o.xp6(2),o.Q6J("ngIf",o.lcZ(3,2,h.recordList$)))},dependencies:[t.B,B.sg,B.O5,A.zJ,A.KT,A.gL,A.k_,B.Ov,B.uU,Z.q,v.Y,Q.A],styles:['@charset "UTF-8";.bottom-sheet[_nghost-%COMP%], .bottom-sheet   [_nghost-%COMP%]{height:auto;max-height:auto!important}[_nghost-%COMP%]{padding-top:var(--page-header-height);padding-bottom:var(--bottom-fixed-bar-height)}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   .record-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:12px;grid-row-gap:12px;padding:12px 20px 24px}[_nghost-%COMP%]   .record-container[_ngcontent-%COMP%]   .record-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:12px;gap:12px;border-radius:12px;box-shadow:0 6px 16px #14141414,0 0 0 1px #1414140f}[_nghost-%COMP%]   .record-container[_ngcontent-%COMP%]   .record-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 auto;width:100%;height:auto;aspect-ratio:1;border-radius:12px}[_nghost-%COMP%]   .record-container[_ngcontent-%COMP%]   .record-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:var(--gray);font-weight:500}[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;padding-bottom:36px;font-size:18px;color:var(--gray);font-weight:500}']}),m})();var et=l(5698),N=l(7204);function nt(m,_){if(1&m){const c=o.EpF();o.TgZ(0,"div",13),o.NdJ("click",function(){o.CHM(c);const x=o.oxw();return o.KtG(x.openRecordSelector())}),o._UZ(1,"mp-icon",14),o.TgZ(2,"span"),o._uU(3,"\ubb38\uc758\ud560 \uc9c4\ub2e8 \uae30\ub85d\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694"),o.qZA()()}}function ot(m,_){if(1&m&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&m){const c=o.oxw(2);o.xp6(1),o.hij("\uc678 ",(null==c.form.record.value?null:c.form.record.value.diagnosisResults.length)-1," \uac1c")}}function it(m,_){if(1&m){const c=o.EpF();o.TgZ(0,"div",15),o.NdJ("click",function(){o.CHM(c);const x=o.oxw();return o.KtG(x.openRecordSelector())}),o._UZ(1,"img",16),o.TgZ(2,"div",17)(3,"div",18),o._UZ(4,"crop-type-badge",19),o.TgZ(5,"span"),o._uU(6),o.ALo(7,"date"),o.qZA()(),o.TgZ(8,"div",18),o._uU(9),o.ALo(10,"diseaseName"),o.YNc(11,ot,2,1,"span",20),o.qZA()()()}if(2&m){const c=o.oxw();o.xp6(1),o.Q6J("src",null==c.form.record.value?null:c.form.record.value.imagePath,o.LSH)("alt","\uc791\ubb3c \uc774\ubbf8\uc9c0"),o.xp6(3),o.Q6J("cropType",null==c.form.record.value?null:c.form.record.value.cropType),o.xp6(2),o.Oqu(o.xi3(7,7,null==c.form.record.value?null:c.form.record.value.regDate,"yyyy.MM.dd HH:mm")),o.xp6(3),o.AsE(" \ubcd1\ud574: ",o.lcZ(10,10,null==c.form.record.value||null==c.form.record.value.diagnosisResults[0]?null:c.form.record.value.diagnosisResults[0].diseaseCode)," (",(100*(null==c.form.record.value?null:c.form.record.value.diagnosisResults[0].accuracy)).toFixed(2),"%) "),o.xp6(2),o.Q6J("ngIf",(null==c.form.record.value?null:c.form.record.value.diagnosisResults.length)>1)}}let rt=(()=>{class m extends P.NT{constructor(c,h,x,J,R){super(),this.api=c,this.modalRef=h,this.toast=x,this.router=J,this.bottomSheet=R,this.form={record:new M.NI(null,[M.kI.required]),title:new M.NI("",[M.kI.required]),contents:new M.NI("",[M.kI.required])},this.formGroup=new M.cw(this.form),this.status$=new S.X(P.Lr.INITIAL)}ngOnInit(){this.modalRef.setClass("inquiry-input-form"),this.record&&this.form.record.patchValue(this.record)}close(){this.modalRef.hide()}submit(){const{record:c,title:h,contents:x}=this.formGroup.value;this.api.sendInquiry({diagnosisId:c.diagnosisRecordId,title:h,contents:x}).pipe((0,P.vC)(this.status$),(0,w.b)(()=>this.toast.show("\ubb38\uc758\uac00 \uc791\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),(0,w.b)(()=>this.close()),(0,w.b)(()=>this.router.navigate(["/my-page","inquiry"]))).subscribe()}openRecordSelector(){if(this.record)return;const c=this.bottomSheet.show(tt);c.onHide.pipe((0,et.q)(1),(0,w.b)(()=>{c.content.selectedRecord&&this.form.record.patchValue(c.content.selectedRecord)})).subscribe()}}return m.\u0275fac=function(c){return new(c||m)(o.Y36(Y.s),o.Y36(D.UZ),o.Y36(N.k),o.Y36(j.F0),o.Y36(D.BB))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-inquiry-input-form"]],inputs:{record:"record"},standalone:!0,features:[o.qOj,o.jDz],decls:16,vars:14,consts:[["height","64px",3,"title"],["left","","iconName","arrow_back","size","m","variant","void","color","grayDark",3,"click"],[1,"form-container"],[1,"record-label"],["class","record-selector",3,"click",4,"ngIf"],["class","selected-record",3,"click",4,"ngIf"],[1,"input-form"],["size","l","label","\ubb38\uc758 \uc81c\ubaa9","type","text","backgroundColor","white","boxShadow","0 2px 4px 0 rgba(20, 20, 20, 0.02), 0 0 0 1px rgba(0, 0, 0, 0.08)",3,"placeholder","formControl"],[1,"contents-label"],["padding","14px","backgroundColor","white","boxShadow","0 2px 4px 0 rgba(20, 20, 20, 0.02), 0 0 0 1px rgba(0, 0, 0, 0.08)",3,"formControl","placeholder","maxLength","autoFocus","height"],["height","81px"],["label","\ubb38\uc758\ud558\uae30","variant","fill","color","blue","size","m",3,"disabled","loading","click"],["left","","name","send"],[1,"record-selector",3,"click"],["name","touch_app","type","outlined","size","36px","color","redLight"],[1,"selected-record",3,"click"],[3,"src","alt"],[1,"info"],[1,"line"],[3,"cropType"],[4,"ngIf"]],template:function(c,h){1&c&&(o.TgZ(0,"page-header",0)(1,"mp-icon-button",1),o.NdJ("click",function(){return h.close()}),o.qZA()(),o.TgZ(2,"div",2)(3,"div",3),o._uU(4,"\uc9c4\ub2e8 \uae30\ub85d"),o.qZA(),o.YNc(5,nt,4,0,"div",4),o.YNc(6,it,12,12,"div",5),o.TgZ(7,"div",6),o._UZ(8,"mp-input",7),o.TgZ(9,"div",8),o._uU(10,"\ubb38\uc758 \ub0b4\uc6a9"),o.qZA(),o._UZ(11,"mp-textarea",9),o.qZA()(),o.TgZ(12,"bottom-fixed-bar",10)(13,"mp-button",11),o.NdJ("click",function(){return h.submit()}),o.ALo(14,"async"),o._UZ(15,"mp-icon",12),o.qZA()()),2&c&&(o.Q6J("title","\ubb38\uc758 \uc791\uc131"),o.xp6(5),o.Q6J("ngIf",!h.form.record.value),o.xp6(1),o.Q6J("ngIf",h.form.record.value),o.xp6(2),o.Q6J("placeholder","\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")("formControl",h.form.title),o.xp6(3),o.Q6J("formControl",h.form.contents)("placeholder","\uc9c4\ub2e8 \uae30\ub85d\uc5d0 \ub300\ud574 \uad81\uae08\ud55c \uc810\uc744 \uc791\uc131\ud574\ubcf4\uc138\uc694.")("maxLength",500)("autoFocus",!1)("height","250px"),o.xp6(2),o.Q6J("disabled",h.form.record.invalid||h.form.title.invalid||h.form.contents.invalid)("loading",o.lcZ(14,12,h.status$).pending))},dependencies:[t.B,B.O5,M.JJ,M.oH,A.zJ,A.KT,A.gL,A.k_,B.Ov,B.uU,Z.q,v.Y,Q.A,A.lh,A.Ly,z.N],styles:['@charset "UTF-8";  .modal-dialog.inquiry-input-form{margin:0}  .modal-dialog.inquiry-input-form .modal-content{display:block;border-radius:0;min-width:100vw;min-height:var(--full-height);margin:0}[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:column}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .record-label[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .contents-label[_ngcontent-%COMP%]{font-size:13px;color:var(--gray);font-weight:500;padding:0 0 8px 6px}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .record-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px;width:100%;padding:12px;height:104px;box-shadow:0 9px 24px #14141414,0 0 0 1px #1414140f;border-radius:8px;margin-bottom:24px;font-size:16px;color:var(--redLight);font-weight:500}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .selected-record[_ngcontent-%COMP%]{display:flex;gap:16px;padding:12px;width:100%;box-shadow:0 6px 16px #14141414,0 0 0 1px #1414140f;border-radius:8px;margin-bottom:24px}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .selected-record[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .selected-record[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;gap:8px;width:100%;padding:8px 0}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .selected-record[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   mp-input[_ngcontent-%COMP%]{display:block;margin-bottom:24px}[_nghost-%COMP%]   bottom-fixed-bar[_ngcontent-%COMP%]{padding:24px}[_nghost-%COMP%]   bottom-fixed-bar[_ngcontent-%COMP%]   mp-button[_ngcontent-%COMP%]{width:100%}']}),m})()}}]);
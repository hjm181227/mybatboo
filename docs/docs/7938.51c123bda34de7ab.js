"use strict";(self.webpackChunkmybatboo=self.webpackChunkmybatboo||[]).push([[7938,4650],{7938:(O,g,o)=>{o.r(g),o.d(g,{CategoryEditModalComponent:()=>D});var e=o(9401),h=o(974),u=o(4650),i=o(6921),c=o(9300),C=o(1135),E=o(3900),_=o(8505),f=o(4004),s=o(9646),l=o(262),n=o(5649),t=o(2223),d=o(8740),P=o(8615),x=o(7204),y=o(4755);let D=(()=>{class p{constructor(r,a,m,v){this.modalRef=r,this.api=a,this.alert=m,this.toast=v,this.form={name:new e.NI("",[e.kI.required]),memo:new e.NI("")},this.formGroup=new e.cw(this.form),this.status$=new C.X(n.Lr.INITIAL),this.errorMessages={alreadyExists:"\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uce74\ud14c\uace0\ub9ac\uc785\ub2c8\ub2e4.",validationError:"\uce74\ud14c\uace0\ub9ac \uac80\uc0ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."}}ngOnInit(){const{name:r,memo:a}=this.category;this.formGroup.patchValue({name:r,memo:a||""})}updateCategory(){this.alert.confirm({title:"\uce74\ud14c\uace0\ub9ac \uc218\uc815",content:"\uce74\ud14c\uace0\ub9ac\ub97c \uc218\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",confirmMessage:"\uc218\uc815",cancelMessage:"\ucde8\uc18c",confirmButtonColor:"green"}).pipe((0,c.h)(r=>!!r),(0,E.w)(()=>{const{name:r,memo:a}=this.formGroup.value;return this.api.updateCategory(this.category.id,{name:r,memo:a}).pipe((0,n.vC)(this.status$),(0,_.b)(()=>this.toast.show("\uce74\ud14c\uace0\ub9ac\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),(0,_.b)(()=>this.modalRef.hide()))})).subscribe()}categoryNameValidator(){return r=>this.api.loadCategoryByName(r.value).pipe((0,n.Pl)(()=>this.status$.next(n.Lr.PENDING)),(0,f.U)(a=>a.id===this.category.id?(console.log(a,this.category),this.status$.next(n.Lr.INITIAL),(0,s.of)(null)):a.id===this.category.id?(this.status$.next(n.Lr.INITIAL),(0,s.of)(null)):(this.status$.next(n.Lr.REJECTED),{alreadyExists:{value:r.value}})),(0,l.K)(a=>"CATEGORY_NOT_FOUND"===a.error?.code?(this.status$.next(n.Lr.FULFILLED),(0,s.of)(null)):(this.status$.next(n.Lr.REJECTED),(0,s.of)({validationError:{value:r.value}}))))}}return p.\u0275fac=function(r){return new(r||p)(t.Y36(d.UZ),t.Y36(P.s),t.Y36(i.c9),t.Y36(x.k))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-category-edit-modal"]],inputs:{category:"category"},standalone:!0,features:[t.jDz],decls:13,vars:18,consts:[["height","64px","title","\uce74\ud14c\uace0\ub9ac \uc218\uc815"],["left","","size","m","iconName","close","iconSize","16px","borderRadius","8px","color","gray","variant","void",3,"click"],[3,"formGroup"],["size","l","type","text","formControlName","name","backgroundColor","white","boxShadow","0 2px 4px 0 rgba(20, 20, 20, 0.02), 0 0 0 1px rgba(0, 0, 0, 0.08)",3,"label","autoFocus","placeholder","helperError"],["left","","name","folder","type","outlined"],["size","14px",3,"textContent"],["formControlName","memo","padding","14px","backgroundColor","white","boxShadow","0 2px 4px 0 rgba(20, 20, 20, 0.02), 0 0 0 1px rgba(0, 0, 0, 0.08)",3,"placeholder","maxLength","autoFocus","helperText","height"],["textArea",""],[1,"buttons-wrapper"],["label","\ucde8\uc18c","size","m","color","gray","variant","weak",3,"click"],["label","\uc800\uc7a5","size","m","color","green","variant","fill",3,"disabled","loading","click"]],template:function(r,a){1&r&&(t.TgZ(0,"page-header",0)(1,"mp-icon-button",1),t.NdJ("click",function(){return a.modalRef.hide()}),t.qZA()(),t.TgZ(2,"form",2)(3,"mp-input",3),t.ALo(4,"toHelperText"),t._UZ(5,"mp-icon",4),t.qZA(),t._UZ(6,"mp-label",5)(7,"mp-textarea",6,7),t.qZA(),t.TgZ(9,"div",8)(10,"mp-button",9),t.NdJ("click",function(){return a.modalRef.hide()}),t.qZA(),t.TgZ(11,"mp-button",10),t.NdJ("click",function(){return a.updateCategory()}),t.ALo(12,"async"),t.qZA()()),2&r&&(t.xp6(2),t.Q6J("formGroup",a.formGroup),t.xp6(1),t.Q6J("label","\uc774\ub984")("autoFocus",!0)("placeholder","\uce74\ud14c\uace0\ub9ac \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")("helperError",t.xi3(4,13,a.form.name,a.errorMessages)),t.xp6(3),t.Q6J("textContent","\uba54\ubaa8"),t.xp6(1),t.Q6J("placeholder","\uc774 \uce74\ud14c\uace0\ub9ac\uc5d0 \ub300\ud55c \uba54\ubaa8\ub97c \uc791\uc131\ud574\ubcf4\uc138\uc694(200\uc790 \uc774\ub0b4)")("maxLength",300)("autoFocus",!0)("helperText",a.form.memo.value.length>=200?"\uba54\ubaa8\ub294 \ucd5c\ub300 200\uc790\uae4c\uc9c0 \uc791\uc131 \uac00\ub2a5\ud569\ub2c8\ub2e4.":"")("height","200px"),t.xp6(4),t.Q6J("disabled",a.formGroup.invalid)("loading",t.lcZ(12,16,a.status$).pending))},dependencies:[h.B,e._Y,e.JJ,e.JL,e.sg,e.u,i.zJ,i.KT,i.gL,i.k_,y.Ov,n.jy,u.q,i.lh,i.Ly,i.EA],styles:['@charset "UTF-8";[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:column}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   mp-input[_ngcontent-%COMP%]{margin-bottom:16px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   mp-label[_ngcontent-%COMP%]{padding:0 4px;margin:0 0 6px}[_nghost-%COMP%]   .buttons-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;gap:16px;padding:0 24px 24px}[_nghost-%COMP%]   .buttons-wrapper[_ngcontent-%COMP%]   mp-button[_ngcontent-%COMP%]{flex:1}']}),p})()},4650:(O,g,o)=>{o.d(g,{q:()=>f});var e=o(2223),h=o(4755),u=o(5649),i=o(6921),c=o(974);const C=["titleDiv"],E=[[["","left",""]],[["mp-text","center",""]],[["",8,"center"]],[["","right",""]],[["",8,"actions"]]],_=["[left]","mp-text[center]",".center","[right]",".actions"];let f=(()=>{class s extends u.NT{constructor(n,t,d){super(),this.platformId=n,this.elementRef=t,this.renderer=d,this.backgroundColor="white"}get parentElement(){return this.elementRef.nativeElement.parentElement}ngOnInit(){if(!this.height)throw new Error("page-header\uc5d0 height \uc778\ud48b\uc744 \ubb34\uc870\uac74 \ub123\uc5b4\uc918\uc57c\ud569\ub2c8\ub2e4.");this.subscribeOn((0,u.oi)(this,this.renderer,this.elementRef.nativeElement,{"--text-color":({titleColor:n})=>i.u$.parse(n),"--page-header-background":({backgroundColor:n})=>i.u$.parse(n)}))}ngAfterViewInit(){(0,h.NF)(this.platformId)&&(this._backupHeight=getComputedStyle(this.parentElement).getPropertyValue("--page-header-height")),this.subscribeOn((0,u.oi)(this,this.renderer,this.parentElement,{"--page-header-height":({height:n})=>n}))}ngOnDestroy(){super.ngOnDestroy(),(0,h.NF)(this.platformId)&&(this._backupHeight?this.renderer.setStyle(this.parentElement,"--page-header-height",this._backupHeight,e.JOm.DashCase):this.renderer.removeStyle(this.parentElement,"--page-header-height",e.JOm.DashCase))}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(e.Lbi),e.Y36(e.SBq),e.Y36(e.Qsj))},s.\u0275cmp=e.Xpm({type:s,selectors:[["page-header"],["top-panel"]],viewQuery:function(n,t){if(1&n&&e.Gf(C,5),2&n){let d;e.iGM(d=e.CRH())&&(t.titleElement=d.first)}},hostVars:2,hostBindings:function(n,t){2&n&&e.Udp("padding",t.padding)},inputs:{title:"title",height:"height",titleColor:"titleColor",padding:"padding",backgroundColor:"backgroundColor"},standalone:!0,features:[e.qOj,e.jDz],ngContentSelectors:_,decls:11,vars:1,consts:[[1,"flex"],[1,"left-container"],[1,"center","title"],["titleDiv",""],[1,"right-container"]],template:function(n,t){1&n&&(e.F$t(E),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",2,3),e._uU(5),e.Hsn(6,1),e.Hsn(7,2),e.qZA(),e.TgZ(8,"div",4),e.Hsn(9,3),e.qZA()(),e.Hsn(10,4)),2&n&&(e.xp6(5),e.hij(" ",t.title," "))},dependencies:[c.B],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column;padding:14px;background-color:var(--page-header-background-important, var(--page-header-background))}.is-modal[_nghost-%COMP%]{border-top-right-radius:14px;border-top-left-radius:14px}.tab-bar-hidden.header-hidden[_nghost-%COMP%], .tab-bar-hidden.header-hidden   [_nghost-%COMP%]{transform:translateY(0)}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;margin:auto 0}.flex[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1}.flex[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .flex[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     .center{overflow:hidden;text-overflow:ellipsis;flex:1.5;text-align:center;font-size:14px;font-weight:500;line-height:1.58;color:var(--text-color, var(--grayDark));white-space:nowrap}.flex[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.flex[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0 4px 0 0}.flex[_ngcontent-%COMP%]    +.actions{width:100%;margin-top:12px}']}),s})()}}]);